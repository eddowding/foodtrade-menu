<section data-ng-controller="UsersController" data-ng-init="find()">
  <div class="page-header">
    <h1>Users({{users.length}})</h1>
  </div>
  <table class="table table-striped" ng-if='users.length'>
    <thead>
      <tr>
        <th>Email</th>
        <th>Created</th>
        <th>Business Name</th>
        <th>Website</th>
        <th>Phone</th>
        <th>FSA ID</th>
        <th>No. of Grids</th>
        <th>No. of items in Grids</th>
        <th>Details</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat='user in users' ng-init='userFetchExtraDataFn(user)'>
        <td>{{user.email}}</td>
        <td>{{user.created | date:'medium'}}</td>
        <td>{{user.establishment.BusinessName}}</td>
        <td>{{user.establishment.WebSite}}</td>
        <td>{{user.establishment.Phone}}</td>
        <td>{{user.establishment.FHRSID || 'NA'}}</td>
        <td>{{user.grids.length}}</td>
        <td>
          <ul>
            <li ng-repeat='grid in user.grids'>{{grid.name}} ({{grid.tableData.length}})</li>
          </ul>
        </td>
        <td><a ng-href="#!/users/{{user._id}}">Details</a></td>
      </tr>
    </tbody>
  </table>
  <div class="alert alert-warning text-center" data-ng-hide="!users.$resolved || users.length">
    No Users yet, why don't you <a href="/#!/users/create">create one</a>?
  </div>
</section>
