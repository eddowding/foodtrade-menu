<a class="priced" editable-text="row.item.price">{{row.item.price || 0}}</a>
<span class="name" ng-click='toggleItemEditFn(row.item)' ng-hide="row.item.isEdit">{{row.item.name}}</span>
<input type="text" ng-model='row.item.name' class='form-control' ng-show="row.item.isEdit" ng-keypress='saveItemEditFn($event, $index, row.item)' ng-blur='nameEditBlurFn(row.item)' autofocus />
<a class="note" editable-textarea="row.item.note">{{row.item.note || 'add note'}}</a>
<div class="characteristic" ng-if="row.item.hasCharacteristic">
  <span ng-repeat="char in row.item.characteristic" ng-show='!charEditStatus[$index]'>{{char.text}}</span>
  <div ng-click='toggleCharEditFn($index)' ng-show="!charEditStatus[$index]">edit</div>
  <tags-input data-ng-model="row.item.characteristic" data-ng-show="charEditStatus[$index]" replace-spaces-with-dashes='false' placeholder='Add a characteristic' add-from-autocomplete-only='true'>
    <auto-complete source="loadCharTagFn($query)"></auto-complete>
  </tags-input>
  <div ng-click='toggleCharEditFn($index)' ng-show="charEditStatus[$index]">done</div>
</div>

<div class="item-edit-form hidden item-{{rowNumber}}">
  <form>
    <div class="spacing">

      <div class="btn-group btn-group-xs" role="group" aria-label="" style="padding: 10px 0;">
        <button type="button" class="btn btn-default" ng-class="{'btn-success': placeholderCell.allergenType == 'No allergen'}" ng-click='placeholderCell.allergenType="No allergen"'>No allergen</button>
        <button type="button" class="btn btn-default" ng-class="{'btn-warning': placeholderCell.allergenType == 'Removable'}" ng-click='placeholderCell.allergenType="Removable"' ng-dblclick="saveCellEditFn()">Removable</button>
        <button type="button" class="btn btn-default" ng-class="{'btn-danger': placeholderCell.allergenType == 'Fixed'}" ng-click='placeholderCell.allergenType="Fixed"' ng-dblclick="saveCellEditFn()">Fixed</button>
      </div>

      <div class="form- group">
        <label for="exampleInputName2" class="sr-only">Allergen name</label>
        <input type="text" class="form-control input-sm" id="nnn" placeholder="Notes / specify allergen(s)" ng-model='placeholderCell.allergens' ng-hide='placeholderCell.allergenType=="No allergen"' ng-keypress='inputDismissFn($event)' ng-class="{'required': specialColumnAllergenReqFn()}">
      </div>
    </div>

    <div class="form-actions">
      <button type="button" class="btn btn-success btn-xs" ng-click='saveCellEditFn()' ng-class="{'disabled': specialColumnAllergenReqFn()}">
        <i class="fa fa-save"></i> Save
      </button>

      <button type="button" class="btn btn-default btn-xs pull-right" ng-click='cancelCellEditFn()'>
        <i class="fa fa-times"></i> Cancel
      </button>
    </div>
  </form>
</div>
